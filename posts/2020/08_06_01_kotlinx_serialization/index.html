<!doctype html><html lang="ja"><head><meta charset="utf-8"><link crossorigin="anonymous" media="all" rel="stylesheet" href="https://suihan74.github.io/css/frameworks.css?20210401211251"><link crossorigin="anonymous" media="all" rel="stylesheet" href="https://suihan74.github.io/css/github.css?20210401211251"><link crossorigin="anonymous" media="all" rel="stylesheet" href="https://suihan74.github.io/css/user.css?20210401211251"><link crossorigin="anonymous" media="all" rel="stylesheet" href="https://suihan74.github.io/css/lightbox.css"><link crossorigin="anonymous" media="all" rel="stylesheet" href="https://suihan74.github.io/css/syntax-highlight.css"><meta name="viewport" content="width=device-width"><meta name="description" content="kotlin用のJsonシリアライザを使ってみる"><meta name="keywords" content="kotlin,kotlinx,serialization"><link rel="canonical" href="https://suihan74.github.io/posts/2020/08_06_01_kotlinx_serialization/"><meta name="twitter:card" content="summary"><meta name="twitter:title" content="kotlinx.serializationことはじめ - すいはんぶろぐ.io"><meta name="twitter:description" content="kotlin用のJsonシリアライザを使ってみる"><meta name="twitter:site" content="https://suihan74.github.io/"><meta name="twitter:creator" content><meta name="twitter:image" content="https://suihan74.github.io/"><meta property="og:url" content="https://suihan74.github.io/posts/2020/08_06_01_kotlinx_serialization/"><meta property="og:site_name" content="すいはんぶろぐ.io"><meta property="og:type" content="article"><meta property="og:title" content="kotlinx.serializationことはじめ"><meta property="og:description" content="kotlin用のJsonシリアライザを使ってみる"><meta property="article:published_time" content="2020-08-06 21:40:00 +0900 JST"><title>kotlinx.serializationことはじめ - すいはんぶろぐ.io</title><link rel="icon" type="image/x-icon" class="js-site-favicon" href="https://suihan74.github.io/favicon.ico"><link rel="shortcut icon" href="https://suihan74.github.io/favicon.ico"><meta name="theme-color" content="#1e2327"><script async src="https://www.googletagmanager.com/gtag/js?id=UA-71542625-2"></script><script>window.dataLayer=window.dataLayer||[];function gtag(){dataLayer.push(arguments);}
gtag('js',new Date());gtag('config','UA-71542625-2');</script></head><body class="env-production emoji-size-boost page-responsive page-profile"><div class="position-relative js-header-wrapper"><span class="Progress progress-pjax-loader position-fixed width-full js-pjax-loader-bar"><span class="progress-pjax-loader-bar top-0 left-0" style="width:0%"></span></span><header class="Header py-lg-0 js-details-container Details flex-wrap flex-lg-nowrap p-responsive" role="banner"><div class="Header-item d-none d-lg-flex"><a class="Header-link" href="https://suihan74.github.io/" aria-label="Homepage" data-ga-click="Header, go to dashboard, icon:logo"><svg class="octicon octicon-mark-github v-align-middle" height="32" viewBox="0 0 16 16" version="1.1" width="32" aria-hidden="true">
                    <path style="fill-rule:evenodd" d="M 8,0 C 3.58,0 0,3.58 0,8 c 0,3.54 2.29,6.53 5.47,7.59 0.4,0.07 0.55,-0.17 0.55,-0.38 0,-0.19 -0.077797,-1.481017 -0.077797,-2.151017 C 5.9433346,12.597005 6.1160655,11.824118 6.56,11.53 4.78,11.33 3.8013559,10.978983 3.5810169,7.6647458 3.9355372,4.6446549 5.3653277,3.8240736 8.0538984,3.639661 10.967753,3.8102868 12.141357,4.4459308 12.425085,7.6477967 12.255593,10.378813 11.25,11.33 9.47,11.53 c 0.29,0.25 0.54,0.73 0.54,1.48 0,1.07 -0.01,1.93 -0.01,2.2 0,0.21 0.15,0.46 0.55,0.38 C 13.806446,14.490656 15.999121,11.437004 16,8 16,3.58 12.42,0 8,0 Z" />
                    <rect style="fill-rule:evenodd" ry="0.23728813" y="6.3898306" x="6.0169492" height="1.0847455" width="3.9830508"/>
                </svg><span class="site-title-text">すいはんぶろぐ.io</span></a></div><div class="Header-item Header-item--full flex-column flex-lg-row width-full flex-order-2 flex-lg-order-none mr-0 mr-lg-3 mt-3 mt-lg-0 Details-content--hidden"><div class="header-search flex-self-stretch flex-lg-self-auto mr-0 mr-lg-3 mb-3 mb-lg-0 scoped-search site-scoped-search js-site-search position-relative js-jump-to" role="combobox" aria-owns="jump-to-results" aria-label="Search or jump to" aria-haspopup="listbox" aria-expanded="false"><div class="position-relative"></div></div></div><nav class="d-flex" aria-label="Global"><a class="js-selected-navigation-item Header-link py-lg-3">&nbsp;</a></nav><div class="Header-item Header-item--full flex-justify-center d-lg-none position-relative" style="margin-right:auto"><a class="Header-link" href="https://suihan74.github.io/" aria-label="Homepage" data-ga-click="Header, go to dashboard, icon:logo"><svg class="octicon octicon-mark-github v-align-middle" height="32" viewBox="0 0 16 16" version="1.1"
                    width="32" aria-hidden="true">
                    <path style="fill-rule:evenodd" d="M 8,0 C 3.58,0 0,3.58 0,8 c 0,3.54 2.29,6.53 5.47,7.59 0.4,0.07 0.55,-0.17 0.55,-0.38 0,-0.19 -0.077797,-1.481017 -0.077797,-2.151017 C 5.9433346,12.597005 6.1160655,11.824118 6.56,11.53 4.78,11.33 3.8013559,10.978983 3.5810169,7.6647458 3.9355372,4.6446549 5.3653277,3.8240736 8.0538984,3.639661 10.967753,3.8102868 12.141357,4.4459308 12.425085,7.6477967 12.255593,10.378813 11.25,11.33 9.47,11.53 c 0.29,0.25 0.54,0.73 0.54,1.48 0,1.07 -0.01,1.93 -0.01,2.2 0,0.21 0.15,0.46 0.55,0.38 C 13.806446,14.490656 15.999121,11.437004 16,8 16,3.58 12.42,0 8,0 Z" />
                    <rect style="fill-rule:evenodd" ry="0.23728813" y="6.3898306" x="6.0169492" height="1.0847455" width="3.9830508"/>
                </svg><span class="site-title-text">すいはんぶろぐ.io</span></a></div><div class="Header-item position-relative mr-0 d-none d-lg-flex Details-content--hidden"><div class="header-search flex-self-stretch flex-lg-self-auto mr-0 mr-lg-3 mb-3 mb-lg-0 position-relative js-jump-to"><div class="position-relative"><form class="js-site-search-form" role="search" action="https://cse.google.com/cse" method="get"><input type="hidden" name="cx" value="006598476776954487838:x6qvcxfxgqt">
<label class="form-control input-sm header-search-wrapper p-0 header-search-wrapper-jump-to position-relative d-flex flex-justify-between flex-items-center js-chromeless-input-container"><input type="text" class="header-search-form form-control input-sm header-search-input jump-to-field js-jump-to-field" name="q" placeholder="Search" autocapitalize="off" aria-label="Search" spellcheck="false" onkeydown="if(event.keyCode==13){if(this.value.length){document.getElementById('header-search-submit').click();return false}else{return false}};" autocomplete="off">
<button id="header-search-submit" class="mr-1 ml-1 header-search-button" type="submit"><svg class="header-search-button-icon" width="13" height="13" viewBox="0 0 13 13">
                                    <title>サイト内検索</title>
                                    <path d="m4.8495 7.8226c0.82666 0 1.5262-0.29146 2.0985-0.87438 0.57232-0.58292 0.86378-1.2877 0.87438-2.1144 0.010599-0.82666-0.28086-1.5262-0.87438-2.0985-0.59352-0.57232-1.293-0.86378-2.0985-0.87438-0.8055-0.010599-1.5103 0.28086-2.1144 0.87438-0.60414 0.59352-0.8956 1.293-0.87438 2.0985 0.021197 0.8055 0.31266 1.5103 0.87438 2.1144 0.56172 0.60414 1.2665 0.8956 2.1144 0.87438zm4.4695 0.2115 3.681 3.6819-1.259 1.284-3.6817-3.7 0.0019784-0.69479-0.090043-0.098846c-0.87973 0.76087-1.92 1.1413-3.1207 1.1413-1.3553 0-2.5025-0.46363-3.4417-1.3909s-1.4088-2.0686-1.4088-3.4239c0-1.3553 0.4696-2.4966 1.4088-3.4239 0.9392-0.92727 2.0864-1.3969 3.4417-1.4088 1.3553-0.011889 2.4906 0.45771 3.406 1.4088 0.9154 0.95107 1.379 2.0924 1.3909 3.4239 0 1.2126-0.38043 2.2588-1.1413 3.1385l0.098834 0.090049z"></path>
                                </svg></button></label></form></div></div></div></header></div><div id="start-of-content" class="show-on-focus"></div><div id="js-flash-container"></div><div class="application-main" data-commit-hovercards-enabled><div itemscope itemtype="http://schema.org/SoftwareSourceCode"><main id="js-repo-pjax-container" data-pjax-container><div class="pagehead repohead instapaper_ignore readability-menu experiment-repo-nav pt-lg-4"><div class="repohead-details-container clearfix container-lg p-responsive d-lg-block"><div class="d-flex"><h1 class="public css-truncate float-none flex-auto width-fit pl-0"><a class="avatar mr-1" href="https://suihan74.github.io/about/"><img src="/images/author.png" class="avatar-user" width="26" height="26" title="すいはん"></a>
<strong itemprop="name"><a href="https://suihan74.github.io/posts/2020/08_06_01_kotlinx_serialization/">kotlinx.serializationことはじめ</a></strong><div class="text-small text-gray mb-1 mt-1">kotlin用のJsonシリアライザを使ってみる</div><div class="text-small text-gray"><div class="f6 text-gray mt-1"><a class="muted-link mr-3 d-inline-block" href="/tags/kotlin"><svg class="octicon octicon-tag" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true">
  <path fill-rule="evenodd" d="M2.5 7.775V2.75a.25.25 0 01.25-.25h5.025a.25.25 0 01.177.073l6.25 6.25a.25.25 0 010 .354l-5.025 5.025a.25.25 0 01-.354 0l-6.25-6.25a.25.25 0 01-.073-.177zm-1.5 0V2.75C1 1.784 1.784 1 2.75 1h5.025c.464 0 .91.184 1.238.513l6.25 6.25a1.75 1.75 0 010 2.474l-5.026 5.026a1.75 1.75 0 01-2.474 0l-6.25-6.25A1.75 1.75 0 011 7.775zM6 5a1 1 0 100 2 1 1 0 000-2z"></path>
</svg>kotlin</a>
<a class="muted-link mr-3 d-inline-block" href="/tags/kotlinx"><svg class="octicon octicon-tag" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true">
  <path fill-rule="evenodd" d="M2.5 7.775V2.75a.25.25 0 01.25-.25h5.025a.25.25 0 01.177.073l6.25 6.25a.25.25 0 010 .354l-5.025 5.025a.25.25 0 01-.354 0l-6.25-6.25a.25.25 0 01-.073-.177zm-1.5 0V2.75C1 1.784 1.784 1 2.75 1h5.025c.464 0 .91.184 1.238.513l6.25 6.25a1.75 1.75 0 010 2.474l-5.026 5.026a1.75 1.75 0 01-2.474 0l-6.25-6.25A1.75 1.75 0 011 7.775zM6 5a1 1 0 100 2 1 1 0 000-2z"></path>
</svg>kotlinx</a>
<a class="muted-link mr-3 d-inline-block" href="/tags/serialization"><svg class="octicon octicon-tag" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true">
  <path fill-rule="evenodd" d="M2.5 7.775V2.75a.25.25 0 01.25-.25h5.025a.25.25 0 01.177.073l6.25 6.25a.25.25 0 010 .354l-5.025 5.025a.25.25 0 01-.354 0l-6.25-6.25a.25.25 0 01-.073-.177zm-1.5 0V2.75C1 1.784 1.784 1 2.75 1h5.025c.464 0 .91.184 1.238.513l6.25 6.25a1.75 1.75 0 010 2.474l-5.026 5.026a1.75 1.75 0 01-2.474 0l-6.25-6.25A1.75 1.75 0 011 7.775zM6 5a1 1 0 100 2 1 1 0 000-2z"></path>
</svg>serialization</a></div></div><div class="d-block text-small text-gray"><span class="d-inline-block">Created at <time datetime="2020-08-06 21:40" class="no-wrap">2020-08-06 21:40</time></span>
<span class="file-info-divider"></span><span class="d-inline-block">Updated at <time datetime="2021-01-24 20:18" class="no-wrap">2021-01-24 20:18</time></span></div></h1></div></div></div><div class="container-lg clearfix new-discussion-timeline experiment-repo-nav p-responsive"><div class="repository-content"><div class="Box mt-3 position-relative"><div class="Box-header py-2 d-flex flex-column flex-shrink-0 flex-md-row flex-md-items-center"><div class="text-mono f6 flex-auto pr-3 flex-order-2 flex-md-order-1 mt-2 mt-md-0">3435 Words</div><div class="d-flex py-1 py-md-0 flex-auto flex-order-1 flex-md-order-2 flex-sm-grow-0 flex-justify-between"><div class="BtnGroup"><a rel="nofollow" class="btn btn-sm BtnGroup-item" href="https://github.com/suihan74/hugo_files/commits/master/content/posts/2020/08_06_01_kotlinx_serialization.md">History</a></div></div></div><div id="readme" class="Box-body readme blob instapaper_body js-code-block-container"><article class="markdown-body entry-content p-3 p-md-6" itemprop="text"><h2 id="この記事の情報">この記事の情報<a class="anchor" aria-hidden="true" href="#この記事の情報"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a></h2><p><code>kotlinx.serialization 1.0.1</code>について書かれています。<br>アップデートによって内容が古くなる可能性があります。</p><p>公式のドキュメントがかなりしっかり書いてあるので、そっちを読んだ方がいいとは思います。</p><p><a href="https://github.com/Kotlin/kotlinx.serialization/tree/master/docs" target="_blank" rel="noopener">kotlinx.serialization/docs at master · Kotlin/kotlinx.serialization</a></p><h2 id="追記-2021-01-24">追記 (2021-01-24)<a class="anchor" aria-hidden="true" href="#追記-2021-01-24"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a></h2><p>バージョン<code>1.0.1</code>時点での内容に更新。</p><hr><h2 id="依存関係の設定">依存関係の設定<a class="anchor" aria-hidden="true" href="#依存関係の設定"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a></h2><p>必要なところだけ。とりあえずAndroidアプリプロジェクトの想定で。</p><div class="highlight"><pre class="chroma"><code class="language-gradle:[project]build.gradle" data-lang="gradle:[project]build.gradle"><span class="n">buildscript</span> <span class="o">{</span>
    <span class="n">ext</span><span class="o">.</span><span class="na">kotlin_version</span> <span class="o">=</span> <span class="s1">&#39;1.4.21&#39;</span>
    <span class="n">repositories</span> <span class="o">{</span>
        <span class="n">jcenter</span><span class="o">()</span>
    <span class="o">}</span>
    <span class="n">dependencies</span> <span class="o">{</span>
        <span class="n">classpath</span> <span class="s2">&#34;org.jetbrains.kotlin:kotlin-serialization:$kotlin_version&#34;</span>
    <span class="o">}</span>
<span class="o">}</span>
</code></pre></div><p><code>serialization 1.0.1</code>では<code>kotlin 1.4.0</code>以上である必要がある。</p><div class="highlight"><pre class="chroma"><code class="language-gradle:[app]build.gradle" data-lang="gradle:[app]build.gradle"><span class="n">apply</span> <span class="nl">plugin:</span> <span class="s1">&#39;kotlinx-serialization&#39;</span>
<span class="c1">// ほか省略
</span><span class="c1"></span>
<span class="n">android</span> <span class="o">{</span>
    <span class="c1">// 省略
</span><span class="c1"></span><span class="o">}</span>

<span class="n">dependencies</span> <span class="o">{</span>
    <span class="n">implementation</span> <span class="s1">&#39;org.jetbrains.kotlinx:kotlinx-serialization-json:1.0.1&#39;</span>

    <span class="c1">// ほか省略
</span><span class="c1"></span><span class="o">}</span>
</code></pre></div><div class="highlight"><pre class="chroma"><code class="language-:proguard-rules.pro" data-lang=":proguard-rules.pro"><span class="o">-</span><span class="s">keepattributes</span> <span class="o">*</span><span class="nv">Annotation</span><span class="s">*</span><span class="p">,</span> <span class="nv">InnerClasses</span>
<span class="o">-</span><span class="s">dontnote</span> <span class="s">kotlinx</span><span class="p">.</span><span class="s">serialization</span><span class="p">.</span><span class="nv">AnnotationsKt</span> <span class="s">#</span> <span class="s">core</span> <span class="s">serialization</span> <span class="s">annotations</span>

<span class="s">#</span> <span class="s">kotlinx</span><span class="o">-</span><span class="s">serialization</span><span class="o">-</span><span class="s">json</span> <span class="s">specific</span><span class="p">.</span> <span class="nv">Add</span> <span class="s">this</span> <span class="s">if</span> <span class="s">you</span> <span class="s">have</span> <span class="s">java</span><span class="p">.</span><span class="s">lang</span><span class="p">.</span><span class="nv">NoClassDefFoundError</span> <span class="s">kotlinx</span><span class="p">.</span><span class="s">serialization</span><span class="p">.</span><span class="s">json</span><span class="p">.</span><span class="nv">JsonObjectSerializer</span>
<span class="o">-</span><span class="s">keepclassmembers</span> <span class="s">class</span> <span class="s">kotlinx</span><span class="p">.</span><span class="s">serialization</span><span class="p">.</span><span class="s">json</span><span class="p">.</span><span class="s">**</span> <span class="p">{</span>
    <span class="s">***</span> <span class="nv">Companion</span><span class="p">;</span>
<span class="p">}</span>
<span class="o">-</span><span class="s">keepclasseswithmembers</span> <span class="s">class</span> <span class="s">kotlinx</span><span class="p">.</span><span class="s">serialization</span><span class="p">.</span><span class="s">json</span><span class="p">.</span><span class="s">**</span> <span class="p">{</span>
    <span class="s">kotlinx</span><span class="p">.</span><span class="s">serialization</span><span class="p">.</span><span class="nv">KSerializer</span> <span class="nf">serializer</span><span class="p">(...);</span>
<span class="p">}</span>

<span class="s">#</span> <span class="nv">Change</span> <span class="s">here</span> <span class="s">com</span><span class="p">.</span><span class="s">yourcompany</span><span class="p">.</span><span class="s">yourpackage</span>
<span class="o">-</span><span class="s">keep</span><span class="p">,</span><span class="s">includedescriptorclasses</span> <span class="s">class</span> <span class="s">com</span><span class="p">.</span><span class="s">yourcompany</span><span class="p">.</span><span class="s">yourpackage</span><span class="p">.</span><span class="s">**</span><span class="err">$$</span><span class="s">serializer</span> <span class="p">{</span> <span class="s">*</span><span class="p">;</span> <span class="p">}</span> <span class="s">#</span> <span class="s">&lt;--</span> <span class="s">change</span> <span class="s">package</span> <span class="s">name</span> <span class="s">to</span> <span class="s">your</span> <span class="s">app&#39;s
</span><span class="s">-keepclassmembers class com.yourcompany.yourpackage.** { # &lt;-- change package name to your app&#39;s</span>
    <span class="s">***</span> <span class="nv">Companion</span><span class="p">;</span>
<span class="p">}</span>
<span class="o">-</span><span class="s">keepclasseswithmembers</span> <span class="s">class</span> <span class="s">com</span><span class="p">.</span><span class="s">yourcompany</span><span class="p">.</span><span class="s">yourpackage</span><span class="p">.</span><span class="s">**</span> <span class="p">{</span> <span class="s">#</span> <span class="s">&lt;--</span> <span class="s">change</span> <span class="s">package</span> <span class="s">name</span> <span class="s">to</span> <span class="s">your</span> <span class="s">app</span><span class="err">&#39;</span><span class="s">s</span>
    <span class="s">kotlinx</span><span class="p">.</span><span class="s">serialization</span><span class="p">.</span><span class="nv">KSerializer</span> <span class="nf">serializer</span><span class="p">(...);</span>
<span class="p">}</span>
</code></pre></div><ul><li><code># &lt;-- change package name to your app's</code> : 自分のアプリのパッケージ名に書き換えるのを忘れずに</li></ul><hr><h2 id="データクラス例">データクラス例<a class="anchor" aria-hidden="true" href="#データクラス例"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a></h2><div class="highlight"><pre class="chroma"><code class="language-kt:Hoge.kt" data-lang="kt:Hoge.kt"><span class="n">@Serializable</span>
<span class="k">data</span> <span class="k">class</span> <span class="nc">Hoge</span><span class="p">(</span>
    <span class="n">@SerialName</span><span class="p">(</span><span class="s">&#34;hogegege&#34;</span><span class="p">)</span>
    <span class="k">val</span> <span class="py">str</span> <span class="p">:</span> <span class="n">String</span><span class="p">,</span>

    <span class="k">val</span> <span class="py">num</span> <span class="p">:</span> <span class="n">Int</span><span class="p">,</span>

    <span class="n">@Serializable</span><span class="p">(</span><span class="n">with</span> <span class="p">=</span> <span class="n">BooleanAsBinarySerializer</span><span class="o">::</span><span class="k">class</span><span class="p">)</span>
    <span class="k">val</span> <span class="py">b</span> <span class="p">:</span> <span class="n">Boolean</span><span class="p">,</span>

    <span class="n">@Serializable</span><span class="p">(</span><span class="n">with</span> <span class="p">=</span> <span class="n">ZonedDateTimeSerializer</span><span class="o">::</span><span class="k">class</span><span class="p">)</span>
    <span class="k">val</span> <span class="py">date</span> <span class="p">:</span> <span class="n">ZonedDateTime</span><span class="p">,</span>

    <span class="n">@Serializable</span><span class="p">(</span><span class="n">with</span> <span class="p">=</span> <span class="n">RectSerializer</span><span class="o">::</span><span class="k">class</span><span class="p">)</span>
    <span class="k">val</span> <span class="py">rect</span> <span class="p">:</span> <span class="n">Rect</span><span class="p">,</span>

    <span class="k">val</span> <span class="py">nullableStr</span> <span class="p">:</span> <span class="n">String</span><span class="p">?</span> <span class="p">=</span> <span class="k">null</span>
<span class="p">)</span> <span class="p">{</span>
    <span class="k">val</span> <span class="py">message</span> <span class="p">:</span> <span class="n">String</span> <span class="k">by</span> <span class="n">lazy</span> <span class="p">{</span>
        <span class="n">str</span> <span class="p">+</span> <span class="n">num</span> <span class="p">+</span> <span class="n">b</span> <span class="p">+</span> <span class="n">date</span> <span class="p">+</span> <span class="p">(</span><span class="n">nullableStr</span> <span class="o">?:</span> <span class="s">&#34;null&#34;</span><span class="p">)</span>
    <span class="p">}</span>
<span class="p">}</span>
</code></pre></div><ul><li><p><code>@SerialName("")</code> : Jsonでのキー名が異なる場合に指定する<br>Gsonなどのように「すべてのキー名をJsonではスネークケースで扱う」とかは自動でできないっぽいので、現状いちいちこいつを設定する必要がありそう。</p></li><li><p><code>@Serializable(with = xxSerializer::class)</code> : シリアライザをプロパティ側で指定する</p></li><li><p><code>@Contextual</code> : Jsonインスタンス側でシリアライザを指定する<br><code>@Contextual</code>と<code>@Serializable</code>をどちらも指定した場合、<code>@Serializable</code>のシリアライザ指定が優先される。</p></li><li><p>プリミティブ値 : シリアライザを明示的に指定しない場合はアノテーションをつける必要はない</p></li><li><p>デフォルト値 : そのままではデフォルト値の場合はシリアライズ時に出力されない<br>デフォルト値を出力するためには、<code>Json { encodeDefaults = true }</code>と指定した<code>Json</code>インスタンスを使用する</p></li><li><p>lazyプロパティ : Gsonなどと違い、明示的に回避する必要はない</p></li></ul><h2 id="ユーザー定義のシリアライザ例">ユーザー定義のシリアライザ例<a class="anchor" aria-hidden="true" href="#ユーザー定義のシリアライザ例"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a></h2><h3 id="非プリミティブなクラス用のシリアライザ">非プリミティブなクラス用のシリアライザ<a class="anchor" aria-hidden="true" href="#非プリミティブなクラス用のシリアライザ"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a></h3><p>プリミティブ型の値(文字列、数値、真偽値など)やそれらだけをプロパティにもつデータクラスは<code>@Serializable</code>アノテーションを指定する以外には特別な処理を必要としない。<br>一方、ユーザーが作成したクラスや、他のモジュールによって用意されたクラスの内容をjson文字列にシリアライズする際には<code>KSerializer&lt;T></code>を継承したシリアライザを用意する必要がある。</p><h4 id="プリミティブな値と相互変換可能な場合">プリミティブな値と相互変換可能な場合<a class="anchor" aria-hidden="true" href="#プリミティブな値と相互変換可能な場合"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a></h4><div class="highlight"><pre class="chroma"><code class="language-kt:ZonedDateTimeSerializer.kt" data-lang="kt:ZonedDateTimeSerializer.kt"><span class="cm">/** ZonedDateTime用シリアライザ */</span>
<span class="k">class</span> <span class="nc">ZonedDateTimeSerializer</span> <span class="p">:</span> <span class="n">KSerializer</span><span class="p">&lt;</span><span class="n">ZonedDateTime</span><span class="p">&gt;</span> <span class="p">{</span>
    <span class="k">override</span> <span class="k">val</span> <span class="py">descriptor</span><span class="p">:</span> <span class="n">SerialDescriptor</span> <span class="k">by</span> <span class="n">lazy</span> <span class="p">{</span>
        <span class="n">PrimitiveSerialDescriptor</span><span class="p">(</span>
            <span class="n">ZonedDateTimeSerializer</span><span class="o">::</span><span class="k">class</span><span class="p">.</span><span class="n">qualifiedName</span><span class="o">!!</span><span class="p">,</span>
            <span class="n">PrimitiveKind</span><span class="p">.</span><span class="n">STRING</span>
        <span class="p">)</span>
    <span class="p">}</span>

    <span class="k">private</span> <span class="k">val</span> <span class="py">formatter</span> <span class="p">=</span> <span class="n">DateTimeFormatter</span><span class="p">.</span><span class="n">ofPattern</span><span class="p">(</span><span class="s">&#34;uuuu-MM-dd&#39;T&#39;HH:mm:ssXXX&#34;</span><span class="p">)</span>

    <span class="k">override</span> <span class="k">fun</span> <span class="nf">serialize</span><span class="p">(</span><span class="n">encoder</span><span class="p">:</span> <span class="n">Encoder</span><span class="p">,</span> <span class="n">value</span><span class="p">:</span> <span class="n">ZonedDateTime</span><span class="p">)</span> <span class="p">{</span>
        <span class="n">encoder</span><span class="p">.</span><span class="n">encodeString</span><span class="p">(</span><span class="n">value</span><span class="p">.</span><span class="n">format</span><span class="p">(</span><span class="n">formatter</span><span class="p">))</span>
    <span class="p">}</span>

    <span class="k">override</span> <span class="k">fun</span> <span class="nf">deserialize</span><span class="p">(</span><span class="n">decoder</span><span class="p">:</span> <span class="n">Decoder</span><span class="p">):</span> <span class="n">ZonedDateTime</span> <span class="p">{</span>
        <span class="k">return</span> <span class="n">ZonedDateTime</span><span class="p">.</span><span class="n">parse</span><span class="p">(</span><span class="n">decoder</span><span class="p">.</span><span class="n">decodeString</span><span class="p">(),</span> <span class="n">formatter</span><span class="p">)</span>
    <span class="p">}</span>
<span class="p">}</span>
</code></pre></div><p><code>ZonedDateTime</code>の内容は<code>Long</code>型の数値と相互に可換である。このようにプリミティブ値で表現可能なデータクラスは<code>PrimitiveSerialDescriptor</code>を使用して変換できる。</p><p><code>PrimitiveSerialDescriptor</code>の第一引数には一意な名前を指定する。シリアライザ自身の名前を渡しておけばまず大丈夫と思われる。<br>第二引数の<code>PrimitiveKind</code>指定は、何型にエンコードして出力するかという指定だ。(ちなみに、仮に間違った指定をしてもとくにエラーなどにはならず動きはする)</p><h4 id="直接プリミティブ値に変換できない場合">直接プリミティブ値に変換できない場合<a class="anchor" aria-hidden="true" href="#直接プリミティブ値に変換できない場合"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a></h4><p>例として、外部モジュールから提供される次のような<code>Rect</code>クラスを扱いたいとする。<code>Rect</code>クラスの4つのプロパティは何らかの1つのプリミティブ値にまとめて表現することはできないとする。</p><div class="highlight"><pre class="chroma"><code class="language-kt:Rect.kt" data-lang="kt:Rect.kt"><span class="k">data</span> <span class="k">class</span> <span class="nc">Rect</span><span class="p">(</span>
    <span class="k">val</span> <span class="py">left</span> <span class="p">:</span> <span class="n">Int</span><span class="p">,</span>
    <span class="k">val</span> <span class="py">top</span> <span class="p">:</span> <span class="n">Int</span><span class="p">,</span>
    <span class="k">val</span> <span class="py">right</span> <span class="p">:</span> <span class="n">Int</span><span class="p">,</span>
    <span class="k">val</span> <span class="py">bottom</span> <span class="p">:</span> <span class="n">Int</span>
<span class="p">)</span> <span class="p">{</span>
    <span class="n">init</span> <span class="p">{</span>
        <span class="n">require</span><span class="p">(</span><span class="n">left</span> <span class="p">&lt;=</span> <span class="n">right</span><span class="p">)</span>
        <span class="n">require</span><span class="p">(</span><span class="n">top</span> <span class="p">&lt;=</span> <span class="n">bottom</span><span class="p">)</span>
    <span class="p">}</span>
<span class="p">}</span>
</code></pre></div><p>この場合、使用するデスクリプタは<code>PrimitiveSerialDescriptor</code>ではなく、次例のように<code>buildClassSerialDescriptor {...}</code>を使用してデータ構造を扱うデスクリプタを作成する。</p><div class="highlight"><pre class="chroma"><code class="language-kt:RectSerializer.kt" data-lang="kt:RectSerializer.kt"><span class="k">class</span> <span class="nc">RectSerializer</span> <span class="p">:</span> <span class="n">KSerializer</span><span class="p">&lt;</span><span class="n">Rect</span><span class="p">&gt;</span> <span class="p">{</span>
    <span class="k">private</span> <span class="k">enum</span> <span class="k">class</span> <span class="nc">Element</span><span class="p">(</span><span class="k">val</span> <span class="py">selector</span><span class="p">:</span> <span class="p">(</span><span class="n">Rect</span><span class="p">)-&gt;</span><span class="n">Int</span><span class="p">)</span> <span class="p">{</span>
        <span class="n">LEFT</span><span class="p">({</span> <span class="n">it</span><span class="p">.</span><span class="n">left</span> <span class="p">}),</span>
        <span class="n">TOP</span><span class="p">({</span> <span class="n">it</span><span class="p">.</span><span class="n">top</span> <span class="p">}),</span>
        <span class="n">RIGHT</span><span class="p">({</span> <span class="n">it</span><span class="p">.</span><span class="n">right</span> <span class="p">}),</span>
        <span class="n">BOTTOM</span><span class="p">({</span> <span class="n">it</span><span class="p">.</span><span class="n">bottom</span> <span class="p">})</span>
    <span class="p">}</span>

    <span class="k">override</span> <span class="k">val</span> <span class="py">descriptor</span><span class="p">:</span> <span class="n">SerialDescriptor</span>
        <span class="k">get</span><span class="p">()</span> <span class="p">=</span> <span class="n">buildClassSerialDescriptor</span><span class="p">(</span><span class="n">RectSerializer</span><span class="o">::</span><span class="k">class</span><span class="p">.</span><span class="n">qualifiedName</span><span class="o">!!</span><span class="p">)</span> <span class="p">{</span>
            <span class="n">Element</span><span class="p">.</span><span class="n">values</span><span class="p">().</span><span class="n">forEach</span> <span class="p">{</span>
                <span class="n">element</span><span class="p">&lt;</span><span class="n">Int</span><span class="p">&gt;(</span><span class="n">it</span><span class="p">.</span><span class="n">name</span><span class="p">.</span><span class="n">toLowerCase</span><span class="p">())</span>
            <span class="p">}</span>
        <span class="p">}</span>

    <span class="k">override</span> <span class="k">fun</span> <span class="nf">serialize</span><span class="p">(</span><span class="n">encoder</span><span class="p">:</span> <span class="n">Encoder</span><span class="p">,</span> <span class="n">value</span><span class="p">:</span> <span class="n">Rect</span><span class="p">)</span> <span class="p">{</span>
        <span class="n">encoder</span><span class="p">.</span><span class="n">encodeStructure</span><span class="p">(</span><span class="n">descriptor</span><span class="p">)</span> <span class="p">{</span>
            <span class="n">Element</span><span class="p">.</span><span class="n">values</span><span class="p">().</span><span class="n">forEachIndexed</span> <span class="p">{</span> <span class="n">index</span><span class="p">,</span> <span class="n">elem</span> <span class="p">-&gt;</span>
                <span class="n">encodeIntElement</span><span class="p">(</span><span class="n">descriptor</span><span class="p">,</span> <span class="n">index</span><span class="p">,</span> <span class="n">elem</span><span class="p">.</span><span class="n">selector</span><span class="p">(</span><span class="n">value</span><span class="p">))</span>
            <span class="p">}</span>
        <span class="p">}</span>
    <span class="p">}</span>

    <span class="k">override</span> <span class="k">fun</span> <span class="nf">deserialize</span><span class="p">(</span><span class="n">decoder</span><span class="p">:</span> <span class="n">Decoder</span><span class="p">):</span> <span class="n">Rect</span> <span class="p">{</span>
        <span class="k">return</span> <span class="n">decoder</span><span class="p">.</span><span class="n">decodeStructure</span><span class="p">(</span><span class="n">descriptor</span><span class="p">)</span> <span class="p">{</span>
            <span class="k">val</span> <span class="py">elements</span> <span class="p">=</span> <span class="n">IntArray</span><span class="p">(</span><span class="n">Element</span><span class="p">.</span><span class="n">values</span><span class="p">().</span><span class="n">size</span><span class="p">)</span>
            <span class="k">while</span> <span class="p">(</span><span class="k">true</span><span class="p">)</span> <span class="p">{</span>
                <span class="k">when</span> <span class="p">(</span><span class="k">val</span> <span class="py">index</span> <span class="p">=</span> <span class="n">decodeElementIndex</span><span class="p">(</span><span class="n">descriptor</span><span class="p">))</span> <span class="p">{</span>
                    <span class="n">CompositeDecoder</span><span class="p">.</span><span class="n">DECODE_DONE</span> <span class="p">-&gt;</span> <span class="k">break</span>
                    <span class="k">else</span> <span class="p">-&gt;</span> <span class="p">{</span>
                        <span class="k">if</span> <span class="p">(</span><span class="m">0</span> <span class="p">&lt;=</span> <span class="n">index</span> <span class="p">&amp;&amp;</span> <span class="n">index</span> <span class="p">&lt;</span> <span class="n">elements</span><span class="p">.</span><span class="n">size</span><span class="p">)</span> <span class="p">{</span>
                            <span class="n">elements</span><span class="p">[</span><span class="n">index</span><span class="p">]</span> <span class="p">=</span> <span class="n">decodeIntElement</span><span class="p">(</span><span class="n">descriptor</span><span class="p">,</span> <span class="n">index</span><span class="p">)</span>
                        <span class="p">}</span>
                        <span class="k">else</span> <span class="n">error</span><span class="p">(</span><span class="s">&#34;Unexpected index: $index&#34;</span><span class="p">)</span>
                    <span class="p">}</span>
                <span class="p">}</span>
            <span class="p">}</span>
            <span class="n">Rect</span><span class="p">(</span><span class="n">elements</span><span class="p">[</span><span class="m">0</span><span class="p">],</span> <span class="n">elements</span><span class="p">[</span><span class="m">1</span><span class="p">],</span> <span class="n">elements</span><span class="p">[</span><span class="m">2</span><span class="p">],</span> <span class="n">elements</span><span class="p">[</span><span class="m">3</span><span class="p">])</span>
        <span class="p">}</span>
    <span class="p">}</span>
<span class="p">}</span>
</code></pre></div><p>これによって<code>{"left":0,"top":1,"right":2,"bottom":3}</code>というような形で出力されるようになる。</p><p>ここまでやるなら、この方法用のベースクラスを用意して<code>Element</code>列挙体の部分だけ差し替えるように処理の共通化もできそうだが。</p><p>シンプルにべたっと書いた感じは公式リファレンスを参照。</p><p><a href="https://github.com/Kotlin/kotlinx.serialization/blob/master/docs/serializers.md#hand-written-composite-serializers" target="_blank" rel="noopener">Hand-written composite serializer</a></p><h3 id="プリミティブ型に別の様式のものを用意する">プリミティブ型に別の様式のものを用意する<a class="anchor" aria-hidden="true" href="#プリミティブ型に別の様式のものを用意する"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a></h3><div class="highlight"><pre class="chroma"><code class="language-kt:BooleanAsBinarySerializer.kt" data-lang="kt:BooleanAsBinarySerializer.kt"><span class="cm">/** 真偽値を0と1で表現するやつ */</span>
<span class="k">class</span> <span class="nc">BooleanAsBinarySerializer</span> <span class="p">:</span> <span class="n">KSerializer</span><span class="p">&lt;</span><span class="n">Boolean</span><span class="p">&gt;</span> <span class="p">{</span>
    <span class="k">override</span> <span class="k">val</span> <span class="py">descriptor</span><span class="p">:</span> <span class="n">SerialDescriptor</span> <span class="k">by</span> <span class="n">lazy</span> <span class="p">{</span>
        <span class="n">PrimitiveSerialDescriptor</span><span class="p">(</span>
            <span class="n">BooleanBinarySerializer</span><span class="o">::</span><span class="k">class</span><span class="p">.</span><span class="n">qualifiedName</span><span class="o">!!</span><span class="p">,</span>
            <span class="n">PrimitiveKind</span><span class="p">.</span><span class="n">INT</span>
        <span class="p">)</span>
    <span class="p">}</span>

    <span class="k">override</span> <span class="k">fun</span> <span class="nf">serialize</span><span class="p">(</span><span class="n">encoder</span><span class="p">:</span> <span class="n">Encoder</span><span class="p">,</span> <span class="n">value</span><span class="p">:</span> <span class="n">Boolean</span><span class="p">)</span> <span class="p">{</span>
        <span class="n">encoder</span><span class="p">.</span><span class="n">encodeInt</span><span class="p">(</span><span class="k">if</span> <span class="p">(</span><span class="n">value</span><span class="p">)</span> <span class="m">1</span> <span class="k">else</span> <span class="m">0</span><span class="p">)</span>
    <span class="p">}</span>

    <span class="k">override</span> <span class="k">fun</span> <span class="nf">deserialize</span><span class="p">(</span><span class="n">decoder</span><span class="p">:</span> <span class="n">Decoder</span><span class="p">):</span> <span class="n">Boolean</span> <span class="p">{</span>
        <span class="k">return</span> <span class="n">decoder</span><span class="p">.</span><span class="n">decodeInt</span><span class="p">()</span> <span class="p">==</span> <span class="m">1</span>
    <span class="p">}</span>
<span class="p">}</span>
</code></pre></div><p>真偽値などのプリミティブ型の値に対しては基本的にはシリアライザを用意する必要はない。ただし、なんらかの事情でjson側での表現方法を変更する必要がある場合にはこのように新しいシリアライザを用意して、<code>@Serializable</code>アノテーションで指定することができる。</p><hr><h3 id="シリアライズデシリアライズしてみる">シリアライズ・デシリアライズしてみる<a class="anchor" aria-hidden="true" href="#シリアライズデシリアライズしてみる"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a></h3><div class="highlight"><pre class="chroma"><code class="language-kt:example.kt" data-lang="kt:example.kt"><span class="k">fun</span> <span class="nf">main</span><span class="p">()</span> <span class="p">{</span>
    <span class="k">val</span> <span class="py">hoge</span> <span class="p">=</span> <span class="n">Hoge</span><span class="p">(</span>
        <span class="n">str</span> <span class="p">=</span> <span class="s">&#34;hello world.&#34;</span><span class="p">,</span>
        <span class="n">num</span> <span class="p">=</span> <span class="m">1234</span><span class="p">,</span>
        <span class="n">b</span> <span class="p">=</span> <span class="k">true</span><span class="p">,</span>
        <span class="n">date</span> <span class="p">=</span> <span class="n">ZonedDateTime</span><span class="p">.</span><span class="n">now</span><span class="p">(),</span>
        <span class="n">rect</span> <span class="p">=</span> <span class="n">Rect</span><span class="p">(</span><span class="m">0</span><span class="p">,</span> <span class="m">1</span><span class="p">,</span> <span class="m">2</span><span class="p">,</span> <span class="m">3</span><span class="p">)</span>
    <span class="p">)</span>

    <span class="k">val</span> <span class="py">encoded</span> <span class="p">=</span> <span class="n">Json</span><span class="p">.</span><span class="n">encodeToString</span><span class="p">(</span><span class="n">hoge</span><span class="p">)</span>
    <span class="n">println</span><span class="p">(</span><span class="s">&#34;1: $encoded&#34;</span><span class="p">)</span>

    <span class="k">val</span> <span class="py">decoded</span> <span class="p">=</span> <span class="n">Json</span><span class="p">.</span><span class="n">decodeFromString</span><span class="p">&lt;</span><span class="n">Hoge</span><span class="p">&gt;(</span><span class="n">encoded</span><span class="p">)</span>
    <span class="n">println</span><span class="p">(</span><span class="s">&#34;2: ${decoded.message}&#34;</span><span class="p">)</span>

    <span class="k">val</span> <span class="py">list</span> <span class="p">=</span> <span class="n">listOf</span><span class="p">(</span><span class="n">hoge</span><span class="p">,</span> <span class="n">hoge</span><span class="p">)</span>
    <span class="k">val</span> <span class="py">encodedList</span> <span class="p">=</span> <span class="n">Json</span><span class="p">.</span><span class="n">encodeToString</span><span class="p">(</span><span class="n">list</span><span class="p">)</span>

    <span class="n">println</span><span class="p">(</span><span class="s">&#34;3: $encodedList&#34;</span><span class="p">)</span>
<span class="p">}</span>
</code></pre></div><p>実行結果の出力▼</p><pre><code class="language-:出力" data-lang=":出力">1: {&quot;hogegege&quot;:&quot;hello world.&quot;,&quot;num&quot;:1234,&quot;b&quot;:1,&quot;date&quot;:&quot;2021-01-24T17:22:49+09:00&quot;,&quot;rect&quot;:{&quot;left&quot;:0,&quot;top&quot;:1,&quot;right&quot;:2,&quot;bottom&quot;:3}}
2: hello world.1234true2021-01-24T17:22:49+09:00null
3: [{&quot;hogegege&quot;:&quot;hello world.&quot;,&quot;num&quot;:1234,&quot;b&quot;:1,&quot;date&quot;:&quot;2021-01-24T17:22:49+09:00&quot;,&quot;rect&quot;:{&quot;left&quot;:0,&quot;top&quot;:1,&quot;right&quot;:2,&quot;bottom&quot;:3}},{&quot;hogegege&quot;:&quot;hello world.&quot;,&quot;num&quot;:1234,&quot;b&quot;:1,&quot;date&quot;:&quot;2021-01-24T17:22:49+09:00&quot;,&quot;rect&quot;:{&quot;left&quot;:0,&quot;top&quot;:1,&quot;right&quot;:2,&quot;bottom&quot;:3}}]
</code></pre><p>json文字列化するには<code>Json.encodeToString(value)</code>、json文字列からデータクラスを生成するには<code>Json.decodeFromString&lt;T>(str)</code>を使う。<br>シンプルな用途では基本的にこれだけでよい。</p><hr><h2 id="ほか">ほか<a class="anchor" aria-hidden="true" href="#ほか"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a></h2><p>公式リファレンスがすごい文量なので、いくつか使ったことがある部分だけ適当にピックアップしていく。</p><h3 id="データクラスに存在しないフィールドを無視する">データクラスに存在しないフィールドを無視する<a class="anchor" aria-hidden="true" href="#データクラスに存在しないフィールドを無視する"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a></h3><p><a href="https://github.com/Kotlin/kotlinx.serialization/blob/master/docs/json.md#ignoring-unknown-keys" target="_blank" rel="noopener">Ignoring unknown keys</a></p><div class="highlight"><pre class="chroma"><code class="language-kt" data-lang="kt"><span class="n">@Serializable</span>
<span class="k">data</span> <span class="k">class</span> <span class="nc">Project</span><span class="p">(</span><span class="k">val</span> <span class="py">name</span><span class="p">:</span> <span class="n">String</span><span class="p">)</span>

<span class="k">fun</span> <span class="nf">main</span><span class="p">()</span> <span class="p">{</span>
    <span class="k">val</span> <span class="py">formatter</span> <span class="p">=</span> <span class="n">Json</span> <span class="p">{</span> <span class="n">ignoreUnknownKeys</span> <span class="p">=</span> <span class="k">true</span> <span class="p">}</span>
    <span class="k">val</span> <span class="py">data</span> <span class="p">=</span> <span class="n">formatter</span><span class="p">.</span><span class="n">decodeFromString</span><span class="p">&lt;</span><span class="n">Project</span><span class="p">&gt;(</span><span class="s">&#34;&#34;&#34;
</span><span class="s"></span>        <span class="p">{</span><span class="s">&#34;name&#34;</span><span class="p">:</span><span class="s">&#34;kotlinx.serialization&#34;</span><span class="p">,</span><span class="s">&#34;language&#34;</span><span class="p">:</span><span class="s">&#34;Kotlin&#34;</span><span class="p">}</span>
    <span class="s">&#34;&#34;&#34;)
</span><span class="s"></span>    <span class="n">println</span><span class="p">(</span><span class="k">data</span><span class="p">)</span>
<span class="p">}</span>
</code></pre></div><p><code>language</code>フィールドは<code>Project</code>クラスには存在しないが、json文字列には存在する。このような場合、<code>ignoredUnknownKeys = true</code>を指定した新しい<code>Json</code>インスタンスを生成したものを使用することでプログラム上では<code>language</code>フィールドを無視することができる。<br>(指定しない場合<code>JsonDecodingException</code>が発生する)</p><h3 id="シリアライザをjsonインスタンス側で設定する">シリアライザを<code>Json</code>インスタンス側で設定する<a class="anchor" aria-hidden="true" href="#シリアライザをjsonインスタンス側で設定する"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a></h3><p>プロパティに<code>@Contextual</code>を指定している場合、そのプロパティを変換するのに使用するシリアライザは<code>Json</code>インスタンス生成時に指定する必要がある。</p><div class="highlight"><pre class="chroma"><code class="language-kt" data-lang="kt"><span class="n">@Serializable</span>
<span class="k">data</span> <span class="k">class</span> <span class="nc">Hoge</span><span class="p">(</span>
    <span class="n">@Contextual</span>
    <span class="k">val</span> <span class="py">data</span> <span class="p">:</span> <span class="n">ZonedDateTime</span>
<span class="p">)</span>

<span class="k">fun</span> <span class="nf">main</span><span class="p">()</span> <span class="p">{</span>
    <span class="k">val</span> <span class="py">formatter</span> <span class="p">=</span> <span class="n">Json</span> <span class="p">{</span>
        <span class="n">serializersModule</span> <span class="p">=</span> <span class="n">SerializersModule</span> <span class="p">{</span>
            <span class="n">contextual</span><span class="p">(</span><span class="n">ZonedDataTime</span><span class="o">::</span><span class="k">class</span><span class="p">,</span> <span class="n">ZonedDataTimeSerializer</span><span class="p">())</span>
        <span class="p">}</span>
    <span class="p">}</span>
<span class="p">}</span>
</code></pre></div><p>あるクラスに対するシリアライザが常に一種類でかつ何度もその型のプロパティを記述する場合や、値が異なるフォーマットで記録されているがデータ内容自体は同じ複数のjsonを扱う場合(あるか？)などには面倒が減っていいかもしれない。<br>基本的には<code>@Serializable(with = xxSerializer::class)</code>を毎回きっちり指定する方が混乱を招かなくて済むと思う。</p><h3 id="ポリモーフィズムへの対応">ポリモーフィズムへの対応<a class="anchor" aria-hidden="true" href="#ポリモーフィズムへの対応"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a></h3><p><a href="https://github.com/Kotlin/kotlinx.serialization/blob/master/docs/polymorphism.md" target="_blank" rel="noopener">Polymorphism</a></p><h4 id="継承元をsealed-classにする場合">継承元を<code>sealed class</code>にする場合<a class="anchor" aria-hidden="true" href="#継承元をsealed-classにする場合"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a></h4><p><code>sealed class</code>を使用する場合、<code>Json</code>インスタンスに追加の指定を行うことなくポリモーフィックな値を扱うことができる。</p><div class="highlight"><pre class="chroma"><code class="language-kt" data-lang="kt"><span class="n">@Serializable</span>
<span class="k">sealed</span> <span class="k">class</span> <span class="nc">Base</span><span class="p">(</span><span class="k">val</span> <span class="py">id</span> <span class="p">:</span> <span class="n">Int</span><span class="p">)</span>

<span class="n">@Serializable</span>
<span class="k">class</span> <span class="nc">DerivedA</span><span class="p">(</span><span class="k">val</span> <span class="py">msg</span><span class="p">:</span> <span class="n">String</span><span class="p">)</span> <span class="p">:</span> <span class="n">Base</span><span class="p">(</span><span class="m">0</span><span class="p">)</span>

<span class="n">@Serializable</span>
<span class="k">class</span> <span class="nc">DerivedB</span><span class="p">(</span><span class="k">val</span> <span class="py">msg</span><span class="p">:</span> <span class="n">String</span><span class="p">)</span> <span class="p">:</span> <span class="n">Base</span><span class="p">(</span><span class="m">1</span><span class="p">)</span>

<span class="n">@Serializable</span>
<span class="k">class</span> <span class="nc">Exam</span><span class="p">(</span><span class="k">val</span> <span class="py">data</span><span class="p">:</span> <span class="n">Base</span><span class="p">)</span>

<span class="k">fun</span> <span class="nf">main</span><span class="p">()</span> <span class="p">{</span>
    <span class="k">val</span> <span class="py">exam</span> <span class="p">=</span> <span class="n">Exam</span><span class="p">(</span>
        <span class="k">data</span> <span class="p">=</span> <span class="n">DerivedA</span><span class="p">(</span><span class="s">&#34;hage&#34;</span><span class="p">)</span>
    <span class="p">)</span>

    <span class="k">val</span> <span class="py">str</span> <span class="p">=</span> <span class="n">Json</span><span class="p">.</span><span class="n">encodeToString</span><span class="p">(</span><span class="n">exam</span><span class="p">)</span>
    <span class="n">println</span><span class="p">(</span><span class="n">str</span><span class="p">)</span>

    <span class="k">val</span> <span class="py">decoded</span> <span class="p">=</span> <span class="n">Json</span><span class="p">.</span><span class="n">decodeFromString</span><span class="p">&lt;</span><span class="n">Exam</span><span class="p">&gt;(</span><span class="n">str</span><span class="p">)</span>
    <span class="n">println</span><span class="p">((</span><span class="n">decoded</span><span class="p">.</span><span class="k">data</span> <span class="k">as</span> <span class="n">DerivedA</span><span class="p">).</span><span class="n">msg</span><span class="p">)</span>
<span class="p">}</span>
</code></pre></div><h4 id="モジュールに継承構造を教える場合">モジュールに継承構造を教える場合<a class="anchor" aria-hidden="true" href="#モジュールに継承構造を教える場合"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a></h4><p><code>sealed class</code>を使用したくない場合は、次のように継承構造を教えた<code>Json</code>インスタンスを使用することで取り扱いが可能になる。</p><div class="highlight"><pre class="chroma"><code class="language-kt" data-lang="kt"><span class="n">@Serializable</span>
<span class="k">abstract</span> <span class="k">class</span> <span class="nc">Base</span><span class="p">(</span><span class="k">val</span> <span class="py">id</span> <span class="p">:</span> <span class="n">Int</span><span class="p">)</span>

<span class="n">@Serializable</span>
<span class="k">class</span> <span class="nc">DerivedA</span><span class="p">(</span><span class="k">val</span> <span class="py">msg</span><span class="p">:</span> <span class="n">String</span><span class="p">)</span> <span class="p">:</span> <span class="n">Base</span><span class="p">(</span><span class="m">0</span><span class="p">)</span>

<span class="n">@Serializable</span>
<span class="k">class</span> <span class="nc">DerivedB</span><span class="p">(</span><span class="k">val</span> <span class="py">msg</span><span class="p">:</span> <span class="n">String</span><span class="p">)</span> <span class="p">:</span> <span class="n">Base</span><span class="p">(</span><span class="m">1</span><span class="p">)</span>

<span class="n">@Serializable</span>
<span class="k">class</span> <span class="nc">Exam</span><span class="p">(</span><span class="k">val</span> <span class="py">data</span><span class="p">:</span> <span class="n">Base</span><span class="p">)</span>

<span class="k">fun</span> <span class="nf">main</span><span class="p">()</span> <span class="p">{</span>
    <span class="k">val</span> <span class="py">formatter</span> <span class="p">=</span> <span class="n">Json</span> <span class="p">{</span>
        <span class="n">serializersModule</span> <span class="p">=</span> <span class="n">SerializersModule</span> <span class="p">{</span>
            <span class="n">polymorphic</span><span class="p">(</span><span class="n">Base</span><span class="o">::</span><span class="k">class</span><span class="p">)</span> <span class="p">{</span>
                <span class="n">subclass</span><span class="p">(</span><span class="n">DerivedA</span><span class="o">::</span><span class="k">class</span><span class="p">)</span>
                <span class="n">subclass</span><span class="p">(</span><span class="n">DerivedB</span><span class="o">::</span><span class="k">class</span><span class="p">)</span>
            <span class="p">}</span>
        <span class="p">}</span>
    <span class="p">}</span>

    <span class="k">val</span> <span class="py">exam</span> <span class="p">=</span> <span class="n">Exam</span><span class="p">(</span>
        <span class="k">data</span> <span class="p">=</span> <span class="n">DerivedA</span><span class="p">(</span><span class="s">&#34;hage&#34;</span><span class="p">)</span>
    <span class="p">)</span>

    <span class="k">val</span> <span class="py">str</span> <span class="p">=</span> <span class="n">formatter</span><span class="p">.</span><span class="n">encodeToString</span><span class="p">(</span><span class="n">exam</span><span class="p">)</span>
    <span class="n">println</span><span class="p">(</span><span class="n">str</span><span class="p">)</span>

    <span class="k">val</span> <span class="py">decoded</span> <span class="p">=</span> <span class="n">formatter</span><span class="p">.</span><span class="n">decodeFromString</span><span class="p">&lt;</span><span class="n">Exam</span><span class="p">&gt;(</span><span class="n">str</span><span class="p">)</span>
    <span class="n">println</span><span class="p">((</span><span class="n">decoded</span><span class="p">.</span><span class="k">data</span> <span class="k">as</span> <span class="n">DerivedA</span><span class="p">).</span><span class="n">msg</span><span class="p">)</span>
<span class="p">}</span>
</code></pre></div><p>実行結果の出力▼</p><pre><code>{&quot;data&quot;:{&quot;type&quot;:&quot;com.suihan74.sandbox.DerivedA&quot;,&quot;id&quot;:0,&quot;msg&quot;:&quot;hage&quot;}}
hage
</code></pre><p>どちらの方法でも、実体が何型であるかを記録するための<code>type</code>フィールドが自動的に挿入されるので、対象のデータクラスに<code>type</code>という名前のプロパティを持たせているとエラーになる。<code>@SerialName("~~")</code>で保存時に改名するか違うプロパティ名を使用する必要がある。</p><p>また、この<code>type</code>に記録される内容(デフォルトではクラス名)は次のようにして<code>@SerialName("~~")</code>で明示的に指定することができる。</p><div class="highlight"><pre class="chroma"><code class="language-kt" data-lang="kt"><span class="n">@Serializable</span>
<span class="n">@SerialName</span><span class="p">(</span><span class="s">&#34;derived_a&#34;</span><span class="p">)</span>
<span class="k">class</span> <span class="nc">DerivedA</span><span class="p">(</span><span class="k">val</span> <span class="py">msg</span><span class="p">:</span> <span class="n">String</span><span class="p">)</span> <span class="p">:</span> <span class="n">Base</span><span class="p">(</span><span class="m">0</span><span class="p">)</span>
</code></pre></div><p>実行結果の出力▼</p><pre><code>{&quot;data&quot;:{&quot;type&quot;:&quot;derived_a&quot;,&quot;id&quot;:0,&quot;msg&quot;:&quot;hage&quot;}}
</code></pre></article></div></div><div class="Box mt-3 position-relative"><div class="Box-body instapaper_body"><article class="markdown-body entry-content p-3 p-md-6" itemprop="text"><h2>See Also</h2><ul class="mt-2"><li class="p-1"><div><a href="/posts/2020/08_06_00_gson_with_lazy/">lazyプロパティを持ったデータクラスをJson化する</a>
<time datetime="2020-08-06 14:50" class="no-wrap text-small ml-1">(2020-08-06 14:50)</time></div><div class="text-small text-gray mb-1 mt-1">Gsonなどでlazyプロパティ持ったデータクラスを扱う方法</div></li><li class="p-1"><div><a href="/posts/2020/05_03_00_customize_intent_chooser/">IntentChooserの項目をカスタムして強制的に表示させる一例</a>
<time datetime="2020-05-03 14:11" class="no-wrap text-small ml-1">(2020-05-03 14:11)</time></div><div class="text-small text-gray mb-1 mt-1">共有先アプリの選択肢をアプリ側で編集する方法</div></li><li class="p-1"><div><a href="/posts/2020/03_31_00_searchview_cursor/">SearchViewのカーソル色を指定する方法</a>
<time datetime="2020-03-31 00:05" class="no-wrap text-small ml-1">(2020-03-31 00:05)</time></div><div class="text-small text-gray mb-1 mt-1">SearchView内のEditText部分のカーソル色を指定する。</div></li><li class="p-1"><div><a href="/posts/2020/03_26_00_inputmethod/">入力メソッドの表示に関するTIPS</a>
<time datetime="2020-03-26 22:14" class="no-wrap text-small ml-1">(2020-03-26 22:14)</time></div><div class="text-small text-gray mb-1 mt-1">ややこしい思いをしたのでとりあえず問題のなくなった状態を記録する。</div></li><li class="p-1"><div><a href="/posts/2020/03_13_00_bundle_enum/">BundleでEnumを扱うやつ</a>
<time datetime="2020-03-13 18:50" class="no-wrap text-small ml-1">(2020-03-13 18:50)</time></div><div class="text-small text-gray mb-1 mt-1">コストとかはとくに考えないでBundle.putEnum()とかやってみるやつ。</div></li></ul></article></div></div></div></div></main></div></div><script src="https://suihan74.github.io/js/syntax-highlight-title.js" crossorigin="anonymous" type="application/javascript"></script><div class="mt-3 position-relative center"><script type="text/javascript">var nend_params={"media":68318,"site":345989,"spot":1025926,"type":1,"oriented":1};</script><script type="text/javascript" src="https://js1.nend.net/js/nendAdLoader.js"></script></div><div class="utterances"></div><script>var utterancesTheme='github-light'
var utterancesScript=document.createElement('script');utterancesScript.src='https://utteranc.es/client.js';utterancesScript.setAttribute('repo','suihan74\/suihan74.github.io');utterancesScript.setAttribute('issue-term','title');utterancesScript.setAttribute('theme',utterancesTheme);utterancesScript.setAttribute('crossorigin','anonymous');utterancesScript.setAttribute('async','');document.querySelector('.utterances').appendChild(utterancesScript);</script><noscript>Please enable JavaScript to view the comments</noscript><div class="footer container-lg width-full p-responsive" role="contentinfo"><div class="position-relative d-flex flex-row-reverse flex-lg-row flex-wrap flex-lg-nowrap flex-justify-center flex-lg-justify-between pt-6 pb-2 mt-6 f6 text-gray border-top border-gray-light"><ul class="list-style-none d-flex flex-wrap col-12 col-lg-5 flex-justify-center flex-lg-justify-between mb-2 mb-lg-0"><li class="mr-3 mr-lg-0">© 2021 すいはん.</li><li class="mr-3 mr-lg-0">Theme by <a href="https://github.com/MeiK2333/github-style"><span>github-style</span></a> (<a href="https://github.com/suihan74/github-style"><span>customized</span></a>)</li><li class="mr-3 mr-lg-0"><a href="/privacy">Privacy</a></li></ul><a aria-label="Homepage" title="すいはんぶろぐ.io" class="footer-octicon d-none d-lg-block mx-lg-4" href="https://suihan74.github.io/"><svg height="24" class="octicon octicon-mark-github" viewBox="0 0 16 16" version="1.1" width="24"
                aria-hidden="true">
                <path style="fill-rule:evenodd" d="M 8,0 C 3.58,0 0,3.58 0,8 c 0,3.54 2.29,6.53 5.47,7.59 0.4,0.07 0.55,-0.17 0.55,-0.38 0,-0.19 -0.077797,-1.481017 -0.077797,-2.151017 C 5.9433346,12.597005 6.1160655,11.824118 6.56,11.53 4.78,11.33 3.8013559,10.978983 3.5810169,7.6647458 3.9355372,4.6446549 5.3653277,3.8240736 8.0538984,3.639661 10.967753,3.8102868 12.141357,4.4459308 12.425085,7.6477967 12.255593,10.378813 11.25,11.33 9.47,11.53 c 0.29,0.25 0.54,0.73 0.54,1.48 0,1.07 -0.01,1.93 -0.01,2.2 0,0.21 0.15,0.46 0.55,0.38 C 13.806446,14.490656 15.999121,11.437004 16,8 16,3.58 12.42,0 8,0 Z" />
                <rect style="fill-rule:evenodd" ry="0.23728813" y="6.3898306" x="6.0169492" height="1.0847455" width="3.9830508"/>
                
            </svg></a><ul class="list-style-none d-flex flex-wrap col-12 col-lg-5 flex-justify-center flex-lg-justify-between mb-2 mb-lg-0"></ul></div><div class="d-flex flex-justify-center pb-6"><span class="f6 text-gray-light"></span></div></div><script crossorigin="anonymous" type="application/javascript" src="https://suihan74.github.io/js/frameworks.js"></script><script crossorigin="anonymous" type="application/javascript" src="https://suihan74.github.io/js/github-bootstrap.js"></script><script src="https://suihan74.github.io/js/stop.js"></script><script src="https://suihan74.github.io/js/contributions.js"></script><script src="https://suihan74.github.io/js/lightbox-plus-jquery.min.js"></script><script>lightbox.option({'disableScrolling':true})</script></body></html>